(function(){"use strict";var e={5404:function(e,t,a){var r=a(9242),o=a(3396);const s={class:"container mt-4 p-4 text-center border"};function l(e,t,a,r,l,i){const n=(0,o.up)("graph-geoportal");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(n)])}var i=a(7139);const n={class:"row row-cols-1 row-cols-lg-2 align-items-center justify-content-between"},d={key:0,class:"container col-lg-4"},c={class:"row row-cols-1 justify-content-center align-items-center"},h=(0,o._)("div",{class:"mb-1"}," Название графика: ",-1),u={class:"row row-cols-1 justify-content-center col-10 mb-1"},p={class:"mb-1"},g={class:"row row-cols-2 justify-content-center col-10"},b=(0,o._)("div",{class:"col-1 p-1 mb-1",style:{"background-color":"red"}},null,-1),f=["oninput"],w=(0,o._)("div",{class:"col-1 p-1 mb-1",style:{"background-color":"green"}},null,-1),m=["oninput"],v=(0,o._)("div",{class:"col-1 p-1 mb-1",style:{"background-color":"blue"}},null,-1),y=["oninput"],k=(0,o._)("option",{disabled:"",value:"",selected:"true"},"Выберите один из вариантов",-1),D=["value"],_={class:"row col-10 justify-content-center pe-0 ps-0 mt-2"},C=(0,o._)("div",{class:"row col-10 justify-content-center"},[(0,o._)("span",{class:"col-10"},"Вертикальные данные:")],-1),x={class:"row col-7"},G=(0,o._)("option",{disabled:"",value:""},"Выберите один из вариантов",-1),O=(0,o._)("option",{value:"t"},"Температура",-1),T=(0,o._)("option",{value:"po"},"Давление",-1),L=[G,O,T],S={class:"row row-cols-2 mt-3"},U=(0,o._)("div",{class:"col"},"Отображать с:",-1),j=(0,o._)("option",{disabled:"",value:""},"Выберите один из вариантов",-1),E=["value"],$=(0,o._)("div",{class:"col mt-3"},"по:",-1),M=(0,o._)("option",{disabled:"",value:""},"Выберите один из вариантов",-1),P=["value"],R={class:"row col-7 align-self-end mt-3"},z={key:1,class:"col-lg-12 fs-3 text"},A={key:2,class:"row align-self-end mt-3 row-cols-1 col-lg-12"},F=(0,o._)("div",null,"Ссылка на график: ",-1),V={class:"btn btn-link mt-3"};function W(e,t,a,s,l,G){const O=(0,o.up)("Bar");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(O,{class:(0,i.C_)(!1===l.idEx?"col-lg-8":"col-lg-12"),"chart-options":this.graph.chartOptions,"chart-data":this.graph.chartData,height:l.heightGraph},null,8,["class","chart-options","chart-data","height"]),!1===l.idEx?((0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("div",c,[h,(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{placeholder:"Введите название графика","onUpdate:modelValue":t[0]||(t[0]=e=>this.selectedTitle=e)},null,512),[[r.nr,this.selectedTitle]])]),(0,o._)("div",p," Цвет графика: rgb("+(0,i.zw)(l.selectedColor.red)+","+(0,i.zw)(l.selectedColor.green)+","+(0,i.zw)(l.selectedColor.blue)+") ",1),(0,o._)("div",g,[b,(0,o.wy)((0,o._)("input",{class:"col-11 mb-1",type:"range",min:"0",max:"255",step:"1","onUpdate:modelValue":t[1]||(t[1]=e=>this.selectedColor.red=e),oninput:G.changeColor()},null,8,f),[[r.nr,this.selectedColor.red]]),w,(0,o.wy)((0,o._)("input",{class:"col-11 mb-1",type:"range",min:"0",max:"255",step:"1","onUpdate:modelValue":t[2]||(t[2]=e=>this.selectedColor.green=e),oninput:G.changeColor()},null,8,m),[[r.nr,this.selectedColor.green]]),v,(0,o.wy)((0,o._)("input",{class:"col-11 mb-1",type:"range",min:"0",max:"255",step:"1","onUpdate:modelValue":t[3]||(t[3]=e=>this.selectedColor.blue=e),oninput:G.changeColor()},null,8,y),[[r.nr,this.selectedColor.blue]])]),(0,o.wy)((0,o._)("select",{class:"col-10 mt-3",onChange:t[4]||(t[4]=e=>{G.redrawGraph(),G.changeId()}),"onUpdate:modelValue":t[5]||(t[5]=e=>l.selectedTer=e)},[k,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.arrTer,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e},(0,i.zw)(e.name),9,D)))),128))],544),[[r.bM,l.selectedTer]]),(0,o._)("div",_,[C,(0,o._)("div",x,[(0,o.wy)((0,o._)("select",{onChange:t[6]||(t[6]=e=>{G.redrawGraph(),G.changeId()}),"onUpdate:modelValue":t[7]||(t[7]=e=>l.selectedMean=e)},L,544),[[r.bM,l.selectedMean]])])]),(0,o._)("div",S,[U,(0,o.wy)((0,o._)("select",{class:"col-6",onChange:t[8]||(t[8]=e=>G.sliceLabelsGraph()),"onUpdate:modelValue":t[9]||(t[9]=e=>l.selectedFirstDate=e)},[j,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.labelsGraph,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e,key:e},(0,i.zw)(e),9,E)))),128))],544),[[r.bM,l.selectedFirstDate]]),$,(0,o.wy)((0,o._)("select",{class:"col-6 mt-3",onChange:t[10]||(t[10]=e=>G.sliceLabelsGraph()),"onUpdate:modelValue":t[11]||(t[11]=e=>l.selectedEndDate=e)},[M,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.labelsGraph,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e,key:e},(0,i.zw)(e),9,P)))),128))],544),[[r.bM,l.selectedEndDate]])]),(0,o._)("div",R,[(0,o._)("button",{onClick:t[12]||(t[12]=e=>G.generationId()),class:"p-2 btn btn-outline-primary"},"Сохранить график")])])])):(0,o.kq)("",!0),null===l.idEx?((0,o.wg)(),(0,o.iD)("div",z," Графика с таким id не существует ")):(0,o.kq)("",!0),l.URLforSave?((0,o.wg)(),(0,o.iD)("div",A,[F,(0,o._)("button",V,(0,i.zw)(l.URLforSave),1)])):(0,o.kq)("",!0)])}var I=a(6265),B=a.n(I),Z=a(6294),q=a(741);q.kL.register(q.Dx,q.u,q.De,q.ZL,q.uw,q.f$);var H={components:{Bar:Z.$Q},data(){return{selectedFirstDate:"",selectedEndDate:"",selectedTitle:"",standartColor:{red:"13",green:"110",blue:"253"},selectedColor:{red:"",green:"",blue:""},idPage:"",idEx:void 0,selectedMean:"t",selectedTer:"",arrTer:[],iDisplayLength:3061,baseURL:"http://cris.icc.ru/dataset/list?f=1875&count_rows=true&iDisplayStart=0",heightGraph:200,labelsGraph:[],dataGraph:[],graph:{chartData:{labels:[],datasets:[{label:"",data:[],backgroundColor:""}]},chartOptions:{responsive:!0,plugins:{title:{display:!0,text:"",font:{size:20}}}}},URLforSave:""}},methods:{changeId(){window.history.pushState(null,document.title,`${window.location.origin}`),this.URLforSave=!1},redrawGraph(){let e="";const t=this.selectedTer.data,a=[],r=[];t.sort(((e,t)=>e.w_date<t.w_date?-1:e.w_date>t.w_date?1:void 0)),t.map((t=>{if(null!==t.w_date){if("t"===this.selectedMean&&null!==t.t)return e=this.selectedMean+" "+t.wmoid.name,a.push(t.w_date),void r.push(t.t);if("po"===this.selectedMean&&null!==t.po)return e=this.selectedMean+" "+t.wmoid.name,a.push(t.w_date),void r.push(t.po)}})),this.graph.chartData.datasets[0].label=e,this.labelsGraph=a,this.graph.chartData.labels=a,this.dataGraph=r,this.graph.chartData.datasets[0].data=r,this.graph.chartData.datasets[0].backgroundColor=`rgb(${this.selectedColor.red},${this.selectedColor.green},${this.selectedColor.blue}`,this.sliceLabelsGraph()},async getDataAPI(){try{const e=[],t=await B().get(this.baseURL+"&iDisplayLength="+this.iDisplayLength),a=t.data.aaData;a.map((t=>{if(!e.includes(t.wmoid.id)&&null!==t.wmoid.name){const a=t.wmoid.id,r=t.wmoid.name,o={};o.id=a,o.name=r,o.data=[],this.arrTer.push(o),e.push(a)}this.arrTer.map((e=>{e.id==t.wmoid.id&&e.data.push(t)}))}))}catch(e){alert("Error: "+e)}},async createFirstGraph(){const e=Object.fromEntries(new URL(window.location).searchParams.entries());if(e.id&&""!==e.id){this.idPage=e.id;const t=a(7303).r,r=t.find((e=>e.id==this.idPage));void 0!==r?this.graph=r.dataGraph:this.idEx=null}else await this.getDataAPI(),this.selectedTer=this.arrTer[0],this.selectedColor=this.standartColor,this.idEx=!1,this.redrawGraph()},generationId(){const e={},t=`${this.selectedTer.id}${this.selectedMean}${Date.now()}`,a=this.graph;e.id=t,e.dataGraph=a,this.URLforSave=`${window.location.origin}/?id=${t}`,console.log(JSON.stringify(e))},changeColor(){this.graph.chartData.datasets[0].backgroundColor=`rgb(${this.selectedColor.red},${this.selectedColor.green},${this.selectedColor.blue}`},changeLabel(){this.graph.chartOptions.plugins.title.text=this.selectedTitle},sliceLabelsGraph(){if(""!==this.selectedFirstDate&&""!==this.selectedEndDate){const e=this.labelsGraph.indexOf(this.selectedFirstDate),t=this.labelsGraph.indexOf(this.selectedEndDate);this.graph.chartData.labels=this.labelsGraph.slice(e,t+1),this.graph.chartData.datasets[0].data=this.dataGraph.slice(e,t+1)}}},created(){this.createFirstGraph()},watch:{selectedTitle:function(){this.graph.chartOptions.plugins.title.text=this.selectedTitle}}},K=a(89);const Y=(0,K.Z)(H,[["render",W]]);var J=Y,N={components:{GraphGeoportal:J}};const Q=(0,K.Z)(N,[["render",l]]);var X=Q;const ee=(0,r.ri)(X);ee.mount("#app")},7303:function(e){e.exports=JSON.parse('{"r":[{"id":"1","dataGraph":{"chartData":{"labels":["2020-11-01 02:00:00","2020-11-01 05:00:00","2020-11-01 08:00:00","2020-11-01 11:00:00","2020-11-01 14:00:00","2020-11-01 17:00:00","2020-11-01 20:00:00","2020-11-02 02:00:00","2020-11-02 05:00:00","2020-11-02 08:00:00","2020-11-02 11:00:00","2020-11-02 14:00:00","2020-11-02 17:00:00","2020-11-02 20:00:00","2020-11-02 23:00:00","2020-11-03 02:00:00","2020-11-03 05:00:00","2020-11-03 08:00:00","2020-11-03 11:00:00","2020-11-03 14:00:00","2020-11-03 17:00:00","2020-11-03 20:00:00","2020-11-03 23:00:00","2020-11-04 02:00:00","2020-11-04 05:00:00","2020-11-04 08:00:00","2020-11-04 11:00:00","2020-11-04 14:00:00","2020-11-04 17:00:00","2020-11-04 20:00:00","2020-11-04 23:00:00","2020-11-05 02:00:00","2020-11-05 05:00:00","2020-11-05 08:00:00","2020-11-05 11:00:00","2020-11-05 14:00:00","2020-11-05 17:00:00","2020-11-05 20:00:00","2020-11-05 23:00:00","2020-11-06 02:00:00","2020-11-06 05:00:00","2020-11-06 08:00:00","2020-11-06 11:00:00","2020-11-06 14:00:00","2020-11-06 17:00:00","2020-11-06 20:00:00","2020-11-06 23:00:00","2020-11-07 02:00:00","2020-11-07 05:00:00","2020-11-07 08:00:00","2020-11-07 11:00:00","2020-11-07 14:00:00","2020-11-07 17:00:00","2020-11-07 20:00:00","2020-11-07 23:00:00","2020-11-08 02:00:00","2020-11-08 08:00:00","2020-11-08 11:00:00","2020-11-08 14:00:00","2020-11-08 17:00:00","2020-11-08 20:00:00","2020-11-08 23:00:00","2020-11-09 02:00:00","2020-11-09 05:00:00","2020-11-09 08:00:00","2020-11-09 11:00:00","2020-11-09 14:00:00","2020-11-09 17:00:00","2020-11-09 20:00:00","2020-11-09 23:00:00","2020-11-10 02:00:00","2020-11-10 05:00:00","2020-11-10 08:00:00","2020-11-10 11:00:00","2020-11-10 14:00:00","2020-11-10 17:00:00","2020-11-10 20:00:00","2020-11-10 23:00:00","2020-11-11 02:00:00","2020-11-11 05:00:00","2020-11-11 08:00:00","2020-11-11 11:00:00","2020-11-11 14:00:00","2020-11-11 17:00:00","2020-11-11 20:00:00","2020-11-11 23:00:00","2020-11-12 02:00:00","2020-11-12 05:00:00","2020-11-12 08:00:00","2020-11-12 11:00:00","2020-11-12 14:00:00","2020-11-12 17:00:00","2020-11-12 20:00:00","2020-11-12 23:00:00","2020-11-13 02:00:00","2020-11-13 05:00:00","2020-11-13 08:00:00","2020-11-13 11:00:00","2020-11-13 14:00:00","2020-11-13 17:00:00","2020-11-13 20:00:00","2020-11-13 23:00:00","2020-11-14 02:00:00","2020-11-14 05:00:00","2020-11-14 08:00:00","2020-11-14 11:00:00","2020-11-14 14:00:00","2020-11-14 17:00:00","2020-11-14 20:00:00","2020-11-14 23:00:00","2020-11-15 02:00:00","2020-11-15 05:00:00","2020-11-15 08:00:00","2020-11-15 11:00:00","2020-11-15 14:00:00","2020-11-15 17:00:00","2020-11-15 20:00:00","2020-11-15 23:00:00","2020-11-16 02:00:00","2020-11-16 05:00:00","2020-11-16 08:00:00","2020-11-16 11:00:00","2020-11-16 14:00:00","2020-11-16 17:00:00","2020-11-16 20:00:00","2020-11-16 23:00:00"],"datasets":[{"label":"t Усолье-Сибирское","data":[-5,-8,-10,-8,-7,-8,-13,-12,-14,-14,-9,-2,0,-3,-4,-5,-8,-10,-6,-2,-2,-4,-5,-4,-3,-4,-3,-2,-2,-2,-3,-6,-9,-10,-3,1,0,-3,-3,-1,-2,-2,1,0,-3,-6,-6,-7,-7,-8,-5,-3,-3,-4,-5,-5,-4,0,6,6,0,-1,-4,-6,-8,0,9,8,1,-4,-6,-8,-7,0,5,2,-3,-4,-2,-2,-2,0,2,0,-4,-7,-7,-7,-6,-5,4,4,-1,-2,-3,-3,0,4,8,3,1,0,1,-1,-2,-2,0,-2,-8,-10,-11,-11,-13,-8,-4,-5,-5,-5,-5,-6,-6,-6,-4,-5,-9,-12],"backgroundColor":"rgb(13,110,253"}]},"chartOptions":{"responsive":true,"plugins":{"title":{"display":true,"text":"","font":{"size":20}}},"scales":{"x":{"axis":"x","type":"category","offset":true,"grid":{"offset":true,"display":true,"lineWidth":1,"drawBorder":true,"drawOnChartArea":true,"drawTicks":true,"tickLength":8,"borderDash":[],"borderDashOffset":0,"borderWidth":1,"color":"rgba(0,0,0,0.1)","borderColor":"rgba(0,0,0,0.1)"},"ticks":{"minRotation":0,"maxRotation":50,"mirror":false,"textStrokeWidth":0,"textStrokeColor":"","padding":3,"display":true,"autoSkip":true,"autoSkipPadding":3,"labelOffset":0,"minor":{},"major":{},"align":"center","crossAlign":"near","showLabelBackdrop":false,"backdropColor":"rgba(255, 255, 255, 0.75)","backdropPadding":2,"color":"#666"},"display":true,"reverse":false,"beginAtZero":false,"bounds":"ticks","grace":0,"title":{"display":false,"text":"","padding":{"top":4,"bottom":4},"color":"#666"},"id":"x","position":"bottom"},"y":{"axis":"y","type":"linear","beginAtZero":true,"ticks":{"minRotation":0,"maxRotation":50,"mirror":false,"textStrokeWidth":0,"textStrokeColor":"","padding":3,"display":true,"autoSkip":true,"autoSkipPadding":3,"labelOffset":0,"minor":{},"major":{},"align":"center","crossAlign":"near","showLabelBackdrop":false,"backdropColor":"rgba(255, 255, 255, 0.75)","backdropPadding":2,"color":"#666"},"display":true,"offset":false,"reverse":false,"bounds":"ticks","grace":0,"grid":{"display":true,"lineWidth":1,"drawBorder":true,"drawOnChartArea":true,"drawTicks":true,"tickLength":8,"offset":false,"borderDash":[],"borderDashOffset":0,"borderWidth":1,"color":"rgba(0,0,0,0.1)","borderColor":"rgba(0,0,0,0.1)"},"title":{"display":false,"text":"","padding":{"top":4,"bottom":4},"color":"#666"},"id":"y","position":"left"}}}}},{"id":"2","idTer":"30731","mean":"po","color":{"red":"227","green":"85","blue":"229"}},{"id":"3","idTer":"30712","mean":"t","color":{"red":"54","green":"201","blue":"184"}}]}')}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,s){if(!r){var l=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],s=e[c][2];for(var i=!0,n=0;n<r.length;n++)(!1&s||l>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(i=!1,s<l&&(l=s));if(i){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,l=r[0],i=r[1],n=r[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(n)var c=n(a)}for(t&&t(r);d<l.length;d++)s=l[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},r=self["webpackChunk"]=self["webpackChunk"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(5404)}));r=a.O(r)})();
//# sourceMappingURL=app.259766a7.js.map