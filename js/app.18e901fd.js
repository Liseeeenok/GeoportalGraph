(function(){"use strict";var e={1875:function(e,t,r){var o=r(9242),n=r(3396);const a={class:"container mt-4 p-4 text-center border"};function i(e,t,r,o,i,s){const l=(0,n.up)("graph-geoportal");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(l)])}var s=r(7139);const l={class:"row row-cols-1 row-cols-lg-2 align-items-center justify-content-between"},c={key:0,class:"container col-lg-4"},d={class:"row row-cols-1 justify-content-center align-items-center"},u=(0,n._)("div",{class:"mb-1"}," Цвет графика: ",-1),h={class:"row row-cols-2 justify-content-center col-10"},p=(0,n._)("div",{class:"col-1 p-1 mb-1",style:{"background-color":"red"}},null,-1),g=["oninput"],w=(0,n._)("div",{class:"col-1 p-1 mb-1",style:{"background-color":"green"}},null,-1),f=["oninput"],v=(0,n._)("div",{class:"col-1 p-1 mb-1",style:{"background-color":"blue"}},null,-1),b=["oninput"],m=(0,n._)("option",{disabled:"",value:"",selected:"true"},"Выберите один из вариантов",-1),_=["value"],y={class:"row col-10 justify-content-between pe-0 ps-0 mt-2"},C=(0,n._)("div",{class:"row col-7 justify-content-center"},[(0,n._)("span",{class:"col-10"},"Вертикальные данные:")],-1),D=(0,n._)("div",{class:"row col-5"},"Горизонтальные данные:",-1),k={class:"row col-7"},T=(0,n._)("option",{disabled:"",value:""},"Выберите один из вариантов",-1),x=(0,n._)("option",{value:"t"},"Температура",-1),$=(0,n._)("option",{value:"po"},"Давление",-1),O=[T,x,$],L=(0,n._)("div",{class:"row col-5"},[(0,n._)("select",null,[(0,n._)("option",{disabled:"",value:""},"Выберите один из вариантов"),(0,n._)("option",{value:"t"},"Дата")])],-1),U={class:"row col-7 align-self-end mt-3"},j={key:1,class:"col-lg-12 fs-3 text"},G={key:2,class:"row align-self-end mt-3 row-cols-1 col-lg-12"},M=(0,n._)("div",null,"Ссылка на график: ",-1),E={class:"btn btn-link mt-3"};function S(e,t,r,a,i,T){const x=(0,n.up)("Bar");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(x,{class:(0,s.C_)(!1===i.idEx?"col-lg-8":"col-lg-12"),"chart-options":this.graph.chartOptions,"chart-data":this.graph.chartData,height:i.heightGraph},null,8,["class","chart-options","chart-data","height"]),!1===i.idEx?((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",d,[u,(0,n._)("div",h,[p,(0,n.wy)((0,n._)("input",{class:"col-11 mb-1",type:"range",min:"0",max:"255",step:"1","onUpdate:modelValue":t[0]||(t[0]=e=>this.selectedColor.red=e),oninput:T.changeColor()},null,8,g),[[o.nr,this.selectedColor.red]]),w,(0,n.wy)((0,n._)("input",{class:"col-11 mb-1",type:"range",min:"0",max:"255",step:"1","onUpdate:modelValue":t[1]||(t[1]=e=>this.selectedColor.green=e),oninput:T.changeColor()},null,8,f),[[o.nr,this.selectedColor.green]]),v,(0,n.wy)((0,n._)("input",{class:"col-11 mb-1",type:"range",min:"0",max:"255",step:"1","onUpdate:modelValue":t[2]||(t[2]=e=>this.selectedColor.blue=e),oninput:T.changeColor()},null,8,b),[[o.nr,this.selectedColor.blue]])]),(0,n.wy)((0,n._)("select",{class:"col-10 mt-3",onChange:t[3]||(t[3]=e=>{T.redrawGraph(),T.changeId()}),"onUpdate:modelValue":t[4]||(t[4]=e=>i.selectedTer=e)},[m,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.arrTer,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.id,value:e},(0,s.zw)(e.name),9,_)))),128))],544),[[o.bM,i.selectedTer]]),(0,n._)("div",y,[C,D,(0,n._)("div",k,[(0,n.wy)((0,n._)("select",{onChange:t[5]||(t[5]=e=>{T.redrawGraph(),T.changeId()}),"onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedMean=e)},O,544),[[o.bM,i.selectedMean]])]),L]),(0,n._)("div",U,[(0,n._)("button",{onClick:t[7]||(t[7]=e=>T.generationId()),class:"p-2 btn btn-outline-primary"},"Сохранить график")])])])):(0,n.kq)("",!0),null===i.idEx?((0,n.wg)(),(0,n.iD)("div",j," Графика с таким id не существует ")):(0,n.kq)("",!0),i.URLforSave?((0,n.wg)(),(0,n.iD)("div",G,[M,(0,n._)("button",E,(0,s.zw)(i.URLforSave),1)])):(0,n.kq)("",!0)])}var P=r(6265),R=r.n(P),I=r(6294),V=r(741);V.kL.register(V.Dx,V.u,V.De,V.ZL,V.uw,V.f$);var q={components:{Bar:I.$Q},data(){return{standartColor:{red:"13",green:"110",blue:"253"},selectedColor:{red:"",green:"",blue:""},idPage:"",idEx:void 0,selectedMean:"t",selectedTer:"",arrTer:[],iDisplayLength:3061,baseURL:"http://cris.icc.ru/dataset/list?f=1875&count_rows=true&iDisplayStart=0",heightGraph:200,graph:{chartData:{labels:[],datasets:[{label:"t⁰ Температура воздуха в C⁰",data:[],backgroundColor:""}]},chartOptions:{responsive:!0}},URLforSave:""}},methods:{changeId(){window.history.pushState(null,document.title,`${window.location.origin}`),this.URLforSave=!1},redrawGraph(){let e="";const t=this.selectedTer.data,r=[],o=[];t.sort(((e,t)=>e.w_date<t.w_date?-1:e.w_date>t.w_date?1:void 0)),t.map((t=>{if(null!==t.w_date){if("t"===this.selectedMean&&null!==t.t)return e="t⁰ Температура воздуха в C⁰",r.push(t.w_date),void o.push(t.t);if("po"===this.selectedMean&&null!==t.po)return e="p Атмосферное давление на уровне станции в мм. рт. ст.",r.push(t.w_date),void o.push(t.po)}})),this.graph.chartData.datasets[0].label=e,this.graph.chartData.labels=r,this.graph.chartData.datasets[0].data=o,this.graph.chartData.datasets[0].backgroundColor=`rgb(${this.selectedColor.red},${this.selectedColor.green},${this.selectedColor.blue}`},async getDataAPI(){try{const e=[],t=await R().get(this.baseURL+"&iDisplayLength="+this.iDisplayLength),r=t.data.aaData;r.map((t=>{if(!e.includes(t.wmoid.id)&&null!==t.wmoid.name){const r=t.wmoid.id,o=t.wmoid.name,n={};n.id=r,n.name=o,n.data=[],this.arrTer.push(n),e.push(r)}this.arrTer.map((e=>{e.id==t.wmoid.id&&e.data.push(t)}))}))}catch(e){alert("Error: "+e)}},async createFirstGraph(){const e=Object.fromEntries(new URL(window.location).searchParams.entries());if(await this.getDataAPI(),e.id&&""!==e.id){this.idPage=e.id;const t=r(7303).r,o=t.find((e=>e.id==this.idPage));if(void 0!==o){this.selectedMean=o.mean;const e=this.arrTer.find((e=>e.id==o.idTer));this.selectedTer=e,this.selectedColor.red=o.color.red,this.selectedColor.green=o.color.green,this.selectedColor.blue=o.color.blue,this.idEx=!0,this.redrawGraph()}else this.idEx=null}else this.selectedTer=this.arrTer[0],this.selectedColor=this.standartColor,this.idEx=!1,this.redrawGraph()},generationId(){const e={},t=`${this.selectedTer.id}${this.selectedMean}${Date.now()}`,r=`${this.selectedTer.id}`,o=`${this.selectedMean}`;e.id=t,e.idTer=r,e.mean=o,this.URLforSave=`${window.location.origin}/?id=${t}`,window.history.pushState(null,document.title,`${window.location.origin}/?id=${t}`),console.log(e)},changeColor(){this.graph.chartData.datasets[0].backgroundColor=`rgb(${this.selectedColor.red},${this.selectedColor.green},${this.selectedColor.blue}`}},created(){this.createFirstGraph()}},F=r(89);const Z=(0,F.Z)(q,[["render",S]]);var z=Z,A={components:{GraphGeoportal:z}};const B=(0,F.Z)(A,[["render",i]]);var W=B;const H=(0,o.ri)(W);H.mount("#app")},7303:function(e){e.exports=JSON.parse('{"r":[{"id":"1","idTer":"30731","mean":"t","color":{"red":"255","green":"0","blue":"0"}},{"id":"2","idTer":"30731","mean":"po","color":{"red":"227","green":"85","blue":"229"}},{"id":"3","idTer":"30712","mean":"t","color":{"red":"54","green":"201","blue":"184"}}]}')}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var i=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],a=e[d][2];for(var s=!0,l=0;l<o.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[l])}))?o.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,i=o[0],s=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(l)var d=l(r)}for(t&&t(o);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},o=self["webpackChunk"]=self["webpackChunk"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(1875)}));o=r.O(o)})();
//# sourceMappingURL=app.18e901fd.js.map